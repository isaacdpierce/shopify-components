<section class="ip-image-grid">
  {% if section.settings.title %}
  <header>
    <h2>{{ section.settings.title }}</h2>
  </header>
  {% endif %}

  <div class="ip-image-grid__grid-wrapper">
    {% for block in section.blocks %}
    <picture>
      <img
      src="{{ block.settings.image | img_url: '800x' }}"
      alt="{{ block.settings.image.alt }}">
    </picture>
    {% endfor %}
  </div>
</section>

<style>
  .ip-image-grid {
    margin-bottom: 100px;
  }

  .ip-image-grid header {
    padding: 20px 0;
  }

  .ip-image-grid h2 {
    text-align: center;
  }

  .ip-image-grid picture {
    width: calc(100% / 8);
    height: 230px;
  }

  .ip-image-grid picture > img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    {% if section.settings.image_bw %}
      filter: grayscale(100%);
    {% endif %}
  }

  .ip-image-grid__grid-wrapper {
    display: flex;
    flex-wrap: wrap;
  }

  @media screen and (max-width: 1200px) {
    .ip-image-grid picture {
      width: calc(100%/6);
      height: 200px;
    }
  }

  @media screen and (max-width: 1000px) {
    .ip-image-grid picture {
      width: calc(100%/5);
    }
  }

  @media screen and (max-width: 800px) {
    .ip-image-grid picture {
      width: calc(100%/4);
    }
  }

  @media screen and (max-width: 600px) {
    .ip-image-grid picture {
      width: calc(100%/3);
    }
  }

  @media screen and (max-width: 400px) {
    .ip-image-grid picture {
      width: calc(100%/2);
    }
  }
</style>

{% schema %}
{
  "name": "Image Grid",
  "settings": [
    {
      "id": "title",
      "type": "text",
      "label": "Heading",
      "default": "Title"
    },
    {
      "type": "checkbox",
      "id": "image_bw",
      "default": true,
      "label": "Make All Images black and white"
    }
  ],
  "blocks": [
  {
    "type": "image",
    "name": "Grid Image",
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Grid image"
      }
    ]
  }
],
  "presets": [
    {
      "name": "Image Grid",
      "category": "ip Custom Components"
    }
  ]
}
{% endschema %}